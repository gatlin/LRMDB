<div class="row" id="control-row">
    <div class="col-md-1 col-lg-1">
        <button type="button"
                class="btn btn-default"
                ng-click="addRow()">
                Add Row
        </button>
    </div>
    <div class="col-md-1 col-lg-1 pull-left">
        <button type="button"
            class="btn"
            ng-class="{'btn-warning': dirty, 'btn-success': !dirty, btn: t}"
                ng-click="saveIssues()">
                Save
        </button>
    </div>
    <div class="col-md-10 col-lg-10 pull-left">
        <div class="input-group">
            <span class="input-group-btn">
                <button class="btn btn-default"
                    type="button">Filter</button>
            </span>
            <input type="text" ng-model="query" class="form-control">
        </div>
    </div>
</div>
<hr>
<div class="row" id="data-row">
    <div class="col-md-12 col-lg-12">
        <table class="table table-hover" id="data-table">
            <thead>
                <tr>
                    <th ng-repeat="schemum in schema"
                        ng-click="sortBy(schemum.name)">
                        {{ schemum.human_name }}
                    </th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody style="overflow-y: auto">
                <tr ng-repeat="issue in rows | orderBy: pivot: asc | filter: query">
                    <td>
                        <span editable-select="issue.type"
                            onaftersave="setDirty(issue.id)"
                        e-ng-options="t.val as t.text for t in maintVals">
                            {{issue.type | maintenanceType }}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.description"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.description || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.unit_number"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.unit_number || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.date_performed"
                              onaftersave="setDirty(issue.id)">
                            {{issue.date_performed || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.brand"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.brand|| '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.model_number"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.model_number|| '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.price_paid"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.price_paid || currency}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.who_completed"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.who_completed || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.who_contractor"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.who_contractor || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.rate_charged"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.rate_charged || currency}}
                        </span>
                    </td>
                    <td>
                        <span editable-text="issue.comments"
                            onaftersave="setDirty(issue.id)"
                            >
                            {{issue.comments || '(none)'}}
                        </span>
                    </td>
                    <td>
                        <button type="button"
                            class="btn btn-danger"
                            ng-click="removeRow(issue.id)"
                            >
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
